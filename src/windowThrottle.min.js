!function(e,t){"function"==typeof define&&define.amd?define("WindowThrottle",t(e)):"object"==typeof WindowThrottle?module.WindowThrottle=t(e):e.WindowThrottle=t(e)}(window||this,function(e){"use strict";var t,i={},o=!!document.querySelector&&!!e.addEventListener,n={hasResized:!1,hasScrolled:!1,width:0,height:0,scrollPositionY:0,scrollPositionX:0,orientation:null,documentHeight:0,documentWidth:0},r=!1,s={detectResize:!0,detectScroll:!0,pollingTime:150,useRAF:!1,scrollClass:"wt-scrolling",resizeClass:"wt-resizing"},l=function(e,t,i){if("[object Object]"===Object.prototype.toString.call(e))for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(i,e[o],o,e);else for(var n=0,r=e.length;r>n;n++)t.call(i,e[n],n,e)},c=function(e,t){var i={};return l(e,function(t,o){i[o]=e[o]}),l(t,function(e,o){i[o]=t[o]}),i},a={init:function(){var e=window;a.setRAF(),a.events.polyfill(),t.detectResize===!0&&(n.width=e.innerWidth,n.height=e.innerHeight,n.documentHeight=document.body.scrollHeight,n.documentWidth=document.body.scrollWidth,a.resize.getOrientation(n.width,n.height),e.addEventListener("resize",a.resize.on),e.addEventListener("orientationchange",a.resize.on),a.resize.event()),t.detectScroll===!0&&(n.scrollPositionY=e.pageYOffset,n.scrollPositionX=e.pageXOffset,e.addEventListener("scroll",a.scroll.on),a.scroll.event()),t.useRAF||a.poll()},setRAF:function(){var e=window;e.requestAnimFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)}}()},resize:{timeout:null,on:function(){var e=document.querySelector("html");n.hasResized=!0,t.useRAF&&a.checkAnimationFrame(),e.classList.contains(t.resizeClass)||e.classList.add(t.resizeClass)},event:function(){var e=document.body.scrollHeight,i=document.body.scrollWidth,o=window,s=o.innerWidth,l=o.innerHeight,c=n.width,u=n.height,d=s!==c,m=l!==u,h=s-c,w=l-u;a.resize.getOrientation(s,l);var g={changed:{width:d,height:m},dimensions:{width:s,height:l},delta:{width:h,height:w},orientation:n.orientation};window.jQuery&&(g.type="wt.resize"),t.useRAF?requestAnimFrame(function(){a.events.triggerCustom(o,"wt.resize",g),window.jQuery&&jQuery(window).trigger(g),a.resize.resetTimeout(t.pollingTime),r=!1}):(a.events.triggerCustom(o,"wt.resize",g),window.jQuery&&jQuery(window).trigger(g),a.resize.resetTimeout(t.pollingTime)),n.width=s,n.height=l,n.documentHeight=e,n.documentWidth=i,n.hasResized=!1},getOrientation:function(e,t){var i=window;void 0!==i.matchMedia?(i.matchMedia("(orientation: landscape)").matches&&(n.orientation="landscape"),i.matchMedia("(orientation: portrait)").matches&&(n.orientation="portrait")):((e>t||e===t)&&(n.orientation="landscape"),t>e&&(n.orientation="portrait"))},resetTimeout:function(e){a.resize.timeout&&clearTimeout(a.resize.timeout),a.resize.timeout=setTimeout(function(){document.querySelector("html").classList.remove(t.resizeClass)},e)}},scroll:{timeout:null,on:function(){var e=document.querySelector("html");n.hasScrolled=!0,t.useRAF&&a.checkAnimationFrame(),e.classList.contains(t.scrollClass)||e.classList.add(t.scrollClass)},event:function(){var e=window,i=e.pageYOffset,o=e.pageXOffset,s=n.documentHeight,l=n.documentWidth,c=i/(s-n.height)*100,u=o/(l-n.width)*100,d=a.scroll.getScrollPercent(c),m=a.scroll.getScrollPercent(u),h=i-n.scrollPositionY,w=o-n.scrollPositionX,g={delta:{y:h,x:w},percent:{y:d,x:m},scroll:{y:i,x:o}};window.jQuery&&(g.type="wt.scroll"),t.useRAF?requestAnimFrame(function(){a.events.triggerCustom(e,"wt.scroll",g),window.jQuery&&jQuery(window).trigger(g),a.scroll.resetTimeout(16.6667),r=!1}):(a.events.triggerCustom(e,"wt.scroll",g),window.jQuery&&jQuery(window).trigger(g),a.scroll.resetTimeout(t.pollingTime)),n.scrollPositionY=i,n.scrollPositionX=o,n.hasScrolled=!1},getScrollPercent:function(e){var t=0;return t=0>e?0:e>100?100:e},resetTimeout:function(e){a.scroll.timeout&&clearTimeout(a.scroll.timeout),a.scroll.timeout=setTimeout(function(){document.querySelector("html").classList.remove(t.scrollClass)},e)}},poll:function(){t.useRAF||setInterval(a.checkForChanges,t.pollingTime)},checkForChanges:function(){n.hasScrolled&&t.detectScroll===!0&&a.scroll.event(),n.hasResized&&t.detectResize===!0&&a.resize.event()},checkAnimationFrame:function(){r||(r=!0,n.hasScrolled&&t.detectScroll===!0&&a.scroll.event(),n.hasResized&&t.detectResize===!0&&a.resize.event())},events:{polyfill:function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}e.prototype=window.Event.prototype,window.CustomEvent=e},triggerCustom:function(e,t,i){var o=new CustomEvent(t,{detail:i});e.dispatchEvent(o)}}};return i.init=function(e){o&&(t=c(t||s,e||{}),a.init())},i});
