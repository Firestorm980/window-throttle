!function(e,t){"function"==typeof define&&define.amd?define("WindowThrottle",t(e)):"object"==typeof WindowThrottle?module.WindowThrottle=t(e):e.WindowThrottle=t(e)}(window||this,function(e){"use strict";var t,i={},n=!!document.querySelector&&!!e.addEventListener,o={hasResized:!1,hasScrolled:!1,width:0,height:0,scrollPositionY:0,scrollPositionX:0,orientation:null,documentHeight:0,documentWidth:0,isScrolling:!1,isResizing:!1},s=!1,r={detectResize:!0,detectScroll:!0,scrollClass:"wt-scrolling",resizeClass:"wt-resizing",debounce:!1,debounceTime:250},c=function(e,t,i){if("[object Object]"===Object.prototype.toString.call(e))for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(i,e[n],n,e);else for(var o=0,s=e.length;s>o;o++)t.call(i,e[o],o,e)},l=function(e,t){var i={};return c(e,function(t,n){i[n]=e[n]}),c(t,function(e,n){i[n]=t[n]}),i},a={init:function(){var e=window;a.setRAF(),a.events.polyfill(),t.detectResize===!0&&(o.width=e.innerWidth,o.height=e.innerHeight,o.documentHeight=document.body.scrollHeight,o.documentWidth=document.body.scrollWidth,a.resize.getOrientation(o.width,o.height),e.addEventListener("resize",a.resize.on),e.addEventListener("orientationchange",a.resize.on),a.resize.event()),t.detectScroll===!0&&(o.scrollPositionY=e.pageYOffset,o.scrollPositionX=e.pageXOffset,e.addEventListener("scroll",a.scroll.on),a.scroll.event())},setRAF:function(){var e=window;e.requestAnimFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)}}()},resize:{timeoutClass:!1,timeoutDebounce:!1,lastEventObject:!1,on:function(){var e=document.querySelector("html");if(o.hasResized=!0,o.isResizing=!0,t.debounce?(a.resize.timeoutDebounce&&clearTimeout(a.resize.timeoutDebounce),a.resize.timeoutDebounce=setTimeout(a.resize.event,t.debounceTime)):a.checkAnimationFrame(),e.classList)e.classList.contains(t.resizeClass)||e.classList.add(t.resizeClass);else{var i=new RegExp("(^| )"+t.resizeClass+"( |$)","gi").test(e.className);i&&(e.className+=" "+t.resizeClass)}},event:function(){var e=window,i=document.body.scrollHeight,n=document.body.scrollWidth,r=e.innerWidth,c=e.innerHeight,l=a.resize.getEventObject();requestAnimFrame(function(){a.events.triggerCustom(e,"wt.resize",l),window.jQuery&&jQuery(window).trigger(l),a.resize.lastEventObject=l,a.resetTimeout(t.debounceTime,"resize"),s=!1}),o.width=r,o.height=c,o.documentHeight=i,o.documentWidth=n,o.hasResized=!1},getEventObject:function(){var e=(document.body.scrollHeight,document.body.scrollWidth,window),t=e.innerWidth,i=e.innerHeight,n=o.width,s=o.height,r=t!==n,c=i!==s,l=t-n,u=i-s;a.resize.getOrientation(t,i);var d={changed:{width:r,height:c},dimensions:{width:t,height:i},delta:{width:l,height:u},orientation:o.orientation};return window.jQuery&&(d.type="wt.resize"),d},getOrientation:function(e,t){var i=window;void 0!==i.matchMedia?(i.matchMedia("(orientation: landscape)").matches&&(o.orientation="landscape"),i.matchMedia("(orientation: portrait)").matches&&(o.orientation="portrait")):((e>t||e===t)&&(o.orientation="landscape"),t>e&&(o.orientation="portrait"))}},scroll:{timeoutClass:!1,timeoutDebounce:!1,lastEventObject:!1,on:function(){var e=document.querySelector("html");if(o.hasScrolled=!0,o.isScrolling=!0,t.debounce?(a.scroll.timeoutDebounce&&clearTimeout(a.scroll.timeoutDebounce),a.scroll.timeoutDebounce=setTimeout(a.scroll.event,t.debounceTime)):a.checkAnimationFrame(),e.classList)e.classList.contains(t.scrollClass)||e.classList.add(t.scrollClass);else{var i=new RegExp("(^| )"+t.scrollClass+"( |$)","gi").test(e.className);i&&(e.className+=" "+t.scrollClass)}},event:function(){var e=window,i=e.pageYOffset,n=e.pageXOffset,r=a.scroll.getEventObject();requestAnimFrame(function(){a.events.triggerCustom(e,"wt.scroll",r),window.jQuery&&jQuery(window).trigger(r),a.scroll.lastEventObject=r,a.resetTimeout(t.debounceTime,"scroll"),s=!1}),o.scrollPositionY=i,o.scrollPositionX=n,o.hasScrolled=!1},getEventObject:function(){var e=window,t=e.pageYOffset,i=e.pageXOffset,n=o.documentHeight,s=o.documentWidth,r=t/(n-o.height)*100,c=i/(s-o.width)*100,l=a.scroll.getScrollPercent(r),u=a.scroll.getScrollPercent(c),d=t-o.scrollPositionY,m=i-o.scrollPositionX,h={delta:{y:d,x:m},percent:{y:l,x:u},scroll:{y:t,x:i}};return window.jQuery&&(h.type="wt.scroll"),h},getScrollPercent:function(e){var t=0;return t=0>e?0:e>100?100:e}},resetTimeout:function(e,i){a[i].timeoutClass&&clearTimeout(a[i].timeoutClass),a[i].timeoutClass=setTimeout(function(){var e=a[i].lastEventObject?a[i].lastEventObject:a[i].getEventObject(),n=document.querySelector("html"),s=t[i+"Class"];switch(n.classList?n.classList.remove(s):n.className=n.className.replace(new RegExp("(^|\\b)"+s.split(" ").join("|")+"(\\b|$)","gi")," "),t.debounce||(a.events.triggerCustom(window,"wt."+i+"End",e),window.jQuery&&(e.type="wt."+i+"End",jQuery(window).trigger(e))),i){case"scroll":o.isScrolling=!1;break;case"resize":o.isResizing=!1}},e)},checkAnimationFrame:function(){s||(s=!0,o.hasScrolled&&t.detectScroll===!0&&a.scroll.event(),o.hasResized&&t.detectResize===!0&&a.resize.event())},events:{polyfill:function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}e.prototype=window.Event.prototype,window.CustomEvent=e},triggerCustom:function(e,t,i){var n=new CustomEvent(t,{detail:i});e.dispatchEvent(n)}}};return i.init=function(e){n&&(t=l(t||r,e||{}),a.init())},i.is=function(e){switch(e){case"scrolling":return o.isScrolling;case"resizing":return o.isResizing;default:console.error('WindowThrottle: Please specify either "scrolling" or "resizing" when checking state.')}},i});
