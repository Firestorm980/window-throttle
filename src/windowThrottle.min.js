!function(e,t){"function"==typeof define&&define.amd?define("WindowThrottle",t(e)):"object"==typeof WindowThrottle?module.WindowThrottle=t(e):e.WindowThrottle=t(e)}(window||this,function(e){"use strict";var t,i={},n=!!document.querySelector&&!!e.addEventListener,o={hasResized:!1,hasScrolled:!1,width:0,height:0,scrollPositionY:0,scrollPositionX:0,orientation:null,documentHeight:0,documentWidth:0},r=!1,s={detectResize:!0,detectScroll:!0,scrollClass:"wt-scrolling",resizeClass:"wt-resizing",debounce:!1,debounceTime:250},l=function(e,t,i){if("[object Object]"===Object.prototype.toString.call(e))for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(i,e[n],n,e);else for(var o=0,r=e.length;r>o;o++)t.call(i,e[o],o,e)},c=function(e,t){var i={};return l(e,function(t,n){i[n]=e[n]}),l(t,function(e,n){i[n]=t[n]}),i},a={init:function(){var e=window;a.setRAF(),a.events.polyfill(),t.detectResize===!0&&(o.width=e.innerWidth,o.height=e.innerHeight,o.documentHeight=document.body.scrollHeight,o.documentWidth=document.body.scrollWidth,a.resize.getOrientation(o.width,o.height),e.addEventListener("resize",a.resize.on),e.addEventListener("orientationchange",a.resize.on),a.resize.event()),t.detectScroll===!0&&(o.scrollPositionY=e.pageYOffset,o.scrollPositionX=e.pageXOffset,e.addEventListener("scroll",a.scroll.on),a.scroll.event())},setRAF:function(){var e=window;e.requestAnimFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)}}()},resize:{timeoutClass:null,timeoutDebounce:null,lastEventObject:!1,on:function(){var e=document.querySelector("html");o.hasResized=!0,t.debounce?(a.resize.timeoutDebounce&&clearTimeout(a.resize.timeoutDebounce),a.resize.timeoutDebounce=setTimeout(a.resize.event,t.debounceTime)):a.checkAnimationFrame(),e.classList.contains(t.resizeClass)||e.classList.add(t.resizeClass)},event:function(){var e=window,t=document.body.scrollHeight,i=document.body.scrollWidth,n=e.innerWidth,s=e.innerHeight,l=a.resize.getEventObject();requestAnimFrame(function(){a.events.triggerCustom(e,"wt.resize",l),window.jQuery&&jQuery(window).trigger(l),a.resize.lastEventObject=l,a.resize.resetTimeout(100),r=!1}),o.width=n,o.height=s,o.documentHeight=t,o.documentWidth=i,o.hasResized=!1},getEventObject:function(){var e=(document.body.scrollHeight,document.body.scrollWidth,window),t=e.innerWidth,i=e.innerHeight,n=o.width,r=o.height,s=t!==n,l=i!==r,c=t-n,u=i-r;a.resize.getOrientation(t,i);var d={changed:{width:s,height:l},dimensions:{width:t,height:i},delta:{width:c,height:u},orientation:o.orientation};return window.jQuery&&(d.type="wt.resize"),d},getOrientation:function(e,t){var i=window;void 0!==i.matchMedia?(i.matchMedia("(orientation: landscape)").matches&&(o.orientation="landscape"),i.matchMedia("(orientation: portrait)").matches&&(o.orientation="portrait")):((e>t||e===t)&&(o.orientation="landscape"),t>e&&(o.orientation="portrait"))},resetTimeout:function(e){a.resize.timeoutClass&&clearTimeout(a.resize.timeoutClass),a.resize.timeoutClass=setTimeout(function(){var e=a.resize.lastEventObject?a.resize.lastEventObject:a.resize.getEventObject();document.querySelector("html").classList.remove(t.resizeClass),a.events.triggerCustom(window,"wt.resizeEnd",e),window.jQuery&&jQuery(window).trigger(e)},e)}},scroll:{timeoutClass:null,timeoutDebounce:null,lastEventObject:!1,on:function(){var e=document.querySelector("html");o.hasScrolled=!0,t.debounce?(a.scroll.timeoutDebounce&&clearTimeout(a.scroll.timeoutDebounce),a.scroll.timeoutDebounce=setTimeout(a.scroll.event,t.debounceTime)):a.checkAnimationFrame(),e.classList.contains(t.scrollClass)||e.classList.add(t.scrollClass)},event:function(){var e=window,t=e.pageYOffset,i=e.pageXOffset,n=a.scroll.getEventObject();requestAnimFrame(function(){a.events.triggerCustom(e,"wt.scroll",n),window.jQuery&&jQuery(window).trigger(n),a.scroll.lastEventObject=n,a.scroll.resetTimeout(100),r=!1}),o.scrollPositionY=t,o.scrollPositionX=i,o.hasScrolled=!1},getEventObject:function(){var e=window,t=e.pageYOffset,i=e.pageXOffset,n=o.documentHeight,r=o.documentWidth,s=t/(n-o.height)*100,l=i/(r-o.width)*100,c=a.scroll.getScrollPercent(s),u=a.scroll.getScrollPercent(l),d=t-o.scrollPositionY,m=i-o.scrollPositionX,h={delta:{y:d,x:m},percent:{y:c,x:u},scroll:{y:t,x:i}};return window.jQuery&&(h.type="wt.scroll"),h},getScrollPercent:function(e){var t=0;return t=0>e?0:e>100?100:e},resetTimeout:function(e){a.scroll.timeoutClass&&clearTimeout(a.scroll.timeoutClass),a.scroll.timeoutClass=setTimeout(function(){var e=a.scroll.lastEventObject?a.scroll.lastEventObject:a.scroll.getEventObject();document.querySelector("html").classList.remove(t.scrollClass),a.events.triggerCustom(window,"wt.scrollEnd",e),window.jQuery&&jQuery(window).trigger(e)},e)}},poll:function(){t.useRAF||setInterval(a.checkForChanges,t.pollingTime)},checkAnimationFrame:function(){r||(r=!0,o.hasScrolled&&t.detectScroll===!0&&a.scroll.event(),o.hasResized&&t.detectResize===!0&&a.resize.event())},events:{polyfill:function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}e.prototype=window.Event.prototype,window.CustomEvent=e},triggerCustom:function(e,t,i){var n=new CustomEvent(t,{detail:i});e.dispatchEvent(n)}}};return i.init=function(e){n&&(t=c(t||s,e||{}),a.init())},i});
