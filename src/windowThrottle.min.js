!function(e,t){"function"==typeof define&&define.amd?define("WindowThrottle",t(e)):"object"==typeof WindowThrottle?module.WindowThrottle=t(e):e.WindowThrottle=t(e)}(window||this,function(e){"use strict";var t,i={},n=!!document.querySelector&&!!e.addEventListener,o={hasResized:!1,hasScrolled:!1,width:0,height:0,scrollPositionY:0,scrollPositionX:0,orientation:null},r=!1,s={detectResize:!0,detectScroll:!0,pollingTime:150,useRAF:!1},c=function(e,t,i){if("[object Object]"===Object.prototype.toString.call(e))for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(i,e[n],n,e);else for(var o=0,r=e.length;r>o;o++)t.call(i,e[o],o,e)},l=function(e,t){var i={};return c(e,function(t,n){i[n]=e[n]}),c(t,function(e,n){i[n]=t[n]}),i},a={init:function(){var e=window;a.setRAF(),a.events.polyfill(),t.detectResize===!0&&(e.addEventListener("resize",a.resize.on),e.addEventListener("orientationchange",a.resize.on),o.width=e.innerWidth,o.height=e.innerHeight,a.resize.getOrientation(o.width,o.height),a.resize.event()),t.detectScroll===!0&&(e.addEventListener("scroll",a.scroll.on),o.scrollPositionY=e.pageYOffset,o.scrollPositionX=e.pageXOffset,a.scroll.event()),t.useRAF||a.poll()},setRAF:function(){var e=window;e.requestAnimFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)}}()},resize:{on:function(){o.hasResized=!0,t.useRAF&&a.checkAnimationFrame()},event:function(){var e=window,i=e.innerWidth,n=e.innerHeight,s=o.width,c=o.height,l=i!==s,d=n!==c,u=i-s,h=n-c;a.resize.getOrientation(i,n);var w={changed:{width:l,height:d},dimensions:{width:i,height:n},delta:{width:u,height:h},orientation:o.orientation};window.jQuery&&(w.type="wt.resize"),t.useRAF?requestAnimFrame(function(){a.events.triggerCustom(e,"wt.resize",w),window.jQuery&&jQuery(window).trigger(w)}):(a.events.triggerCustom(e,"wt.resize",w),window.jQuery&&jQuery(window).trigger(w)),o.width=i,o.height=n,o.hasResized=!1,r=!1},getOrientation:function(e,t){var i=window;void 0!==i.matchMedia?(i.matchMedia("(orientation: landscape)").matches&&(o.orientation="landscape"),i.matchMedia("(orientation: portrait)").matches&&(o.orientation="portrait")):((e>t||e===t)&&(o.orientation="landscape"),t>e&&(o.orientation="portrait"))}},scroll:{on:function(){o.hasScrolled=!0,t.useRAF&&a.checkAnimationFrame()},event:function(){var e=window,i=e.pageYOffset,n=e.pageXOffset,s=document.body.scrollHeight,c=document.body.scrollWidth,l=i/(s-o.height)*100,d=n/(c-o.width)*100,u=l>100?100:l,h=d>100?100:d,w=i-o.scrollPositionY,m=n-o.scrollPositionX,g={delta:{y:w,x:m},percent:{y:u,x:h},scroll:{y:i,x:n}};window.jQuery&&(g.type="wt.scroll"),t.useRAF?requestAnimFrame(function(){a.events.triggerCustom(e,"wt.scroll",g),window.jQuery&&jQuery(window).trigger(g)}):(a.events.triggerCustom(e,"wt.scroll",g),window.jQuery&&jQuery(window).trigger(g)),o.scrollPositionY=i,o.scrollPositionX=n,o.hasScrolled=!1,r=!1}},poll:function(){t.useRAF||setInterval(a.checkForChanges,t.pollingTime)},checkForChanges:function(){o.hasScrolled&&t.detectScroll===!0&&a.scroll.event(),o.hasResized&&t.detectResize===!0&&a.resize.event()},checkAnimationFrame:function(){r||(r=!0,t.detectScroll===!0&&a.scroll.event(),t.detectResize===!0&&a.resize.event())},events:{polyfill:function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}e.prototype=window.Event.prototype,window.CustomEvent=e},triggerCustom:function(e,t,i){var n=new CustomEvent(t,{detail:i});e.dispatchEvent(n)}}};return i.init=function(e){n&&(t=l(t||s,e||{}),a.init())},i});
