!function(e,t){"function"==typeof define&&define.amd?define("WindowThrottle",t(e)):"object"==typeof WindowThrottle?module.WindowThrottle=t(e):e.WindowThrottle=t(e)}(window||this,function(e){"use strict";var t,n={},i=!!document.querySelector&&!!e.addEventListener,o={hasResized:!1,hasScrolled:!1,width:0,height:0,scrollPosition:0,orientation:null},r={detectResize:!0,detectScroll:!0,pollingTime:150,useRAF:!1},a=function(e,t,n){if("[object Object]"===Object.prototype.toString.call(e))for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(n,e[i],i,e);else for(var o=0,r=e.length;r>o;o++)t.call(n,e[o],o,e)},l=function(e,t){var n={};return a(e,function(t,i){n[i]=e[i]}),a(t,function(e,i){n[i]=t[i]}),n},s={init:function(){var e=window;s.setRAF(),s.events.polyfill(),t.detectResize===!0&&(e.addEventListener("resize",function(){o.hasResized=!0}),e.addEventListener("orientationchangei",function(){o.hasResized=!0}),o.width=e.innerWidth,o.height=e.innerHeight,s.resize.getOrientation(o.width,o.height),s.resize.event()),t.detectScroll===!0&&(e.addEventListener("scroll",function(){o.hasScrolled=!0}),o.scrollPosition=e.pageYOffset,s.scroll.event()),s.poll()},setRAF:function(){var e=window;e.requestAnimFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)}}()},resize:{event:function(){var e=window,t=e.innerWidth,n=e.innerHeight,i=o.width,r=o.height,a=t!==i,l=n!==r,c=t-i,d=n-r;s.resize.getOrientation(t,n);var h={changed:{width:a,height:l},dimensions:{width:t,height:n},delta:{width:c,height:d},orientation:o.orientation};s.events.triggerCustom(e,"throttle.resize",h),o.width=t,o.height=n},getOrientation:function(e,t){var n=window;void 0!==n.matchMedia?(n.matchMedia("(orientation: landscape)").matches&&(o.orientation="landscape"),n.matchMedia("(orientation: portrait)").matches&&(o.orientation="portrait")):((e>t||e===t)&&(o.orientation="landscape"),t>e&&(o.orientation="portrait"))}},scroll:{event:function(){var e=window,t=e.scrollY,n=document.body.scrollHeight,i=t/(n-o.height)*100,r=i>100?100:i,a=t-o.scrollPosition,l={delta:a,percent:r};s.events.triggerCustom(e,"throttle.scroll",l),o.scrollPosition=t}},poll:function(){t.useRAF?(s.checkForChanges(),requestAnimFrame(s.poll)):setInterval(s.checkForChanges,t.pollingTime)},checkForChanges:function(){o.hasScrolled&&t.detectScroll===!0&&(s.scroll.event(),o.hasScrolled=!1),o.hasResized&&t.detectResize===!0&&(s.resize.event(),o.hasResized=!1)},events:{polyfill:function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e},triggerCustom:function(e,t,n){var i=new CustomEvent(t,{detail:n});e.dispatchEvent(i)}}};return n.init=function(e){i&&(t=l(t||r,e||{}),s.init())},n});
