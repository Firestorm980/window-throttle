!function(e){var t={detectResize:!0,detectScroll:!0,pollingTime:150,useRAF:!1};e.WindowThrottle=function(i){var o=e.extend({},t,i),n={hasResized:!1,hasScrolled:!1,width:0,height:0,scrollPositionY:0,scrollPositionX:0,orientation:null},r={init:function(){var e=jQuery(window);r.setRAF(),o.detectResize===!0&&(e.on("resize orientationchange",function(){n.hasResized=!0}),n.width=e.width(),n.height=e.height(),r.resize.getOrientation(n.width,n.height),r.resize.event()),o.detectScroll===!0&&(e.on("scroll",function(){n.hasScrolled=!0}),n.scrollPositionY=e.scrollTop(),n.scrollPositionX=e.scrollLeft(),r.scroll.event()),r.poll()},setRAF:function(){var e=window;e.requestAnimFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)}}()},resize:{event:function(){var e=jQuery(window),t=e.width(),i=e.height(),o=n.width,s=n.height,l=t!==o,h=i!==s,a=t-o,c=i-s;r.resize.getOrientation(t,i);var d={type:"wt.resize",changed:{width:l,height:h},dimensions:{width:t,height:i},delta:{width:a,height:c},orientation:n.orientation};e.trigger(d),n.width=t,n.height=i},getOrientation:function(){var e=window;void 0!==e.matchMedia?(e.matchMedia("(orientation: landscape)").matches&&(n.orientation="landscape"),e.matchMedia("(orientation: portrait)").matches&&(n.orientation="portrait")):((width>height||width===height)&&(n.orientation="landscape"),height>width&&(n.orientation="portrait"))}},scroll:{event:function(){var e=jQuery(window),t=e.scrollTop(),i=e.scrollLeft(),o=jQuery(document).height(),r=jQuery(document).width(),s=t/(o-n.height)*100,l=i/(r-n.width)*100,h=s>100?100:s,a=l>100?100:l,c=t-n.scrollPositionY,d=i-n.scrollPositionX,u={type:"wt.scroll",delta:{y:c,x:d},percent:{y:h,x:a},scroll:{y:t,x:i}};e.trigger(u),n.scrollPositionY=t,n.scrollPositionX=i}},poll:function(){o.useRAF?(r.checkForChanges(),requestAnimFrame(r.poll)):setInterval(r.checkForChanges,o.pollingTime)},checkForChanges:function(){n.hasScrolled&&o.detectScroll===!0&&(r.scroll.event(),n.hasScrolled=!1),n.hasResized&&o.detectResize===!0&&(r.resize.event(),n.hasResized=!1)}};return r.init(),{}}}(jQuery);
